Секретное задание для инженера Weyland-Yutani
Код доступа: OMEGA
Тема: Разработка Synthetic Human Core Starter ("Project Bishop")
Постановка задачи
После инцидента с андроидом на корабле «Ностромо» компанией было принято решение
создать единый synthetic-human-core-starter, который будет использоваться для
реализации логики работы всех будущих моделей искусственных людей.
Стартер должен содержать в себе следующее:
1. Модуль приема и исполнения команд;
2. Возможность мониторинга текущей занятости андроида;
3. Возможность аудита любых действий андроида;
4. Модуль обработки ошибок.
Детальнее про каждую из поставленных задач ниже.
Модуль приема и исполнения команд
Андроиды должны четко понимать и исполнять поставленные задачи
В компании принимается единый формат команд для андроидов, который будет содержать
в себе следующие поля:
Поле Тип Ограничения Описание Пример
description | String | До 1000 символов | Описание исполняемой команды | Проверить состояние энергоблока космическогокорабля
priority | Enum (COMMON,CRITICAL) | Должно быть значением Enum | Приоритет выполнения команды | CRITICAL
author | String | До 100 символов | Автор команды | Лейтенант Эллен Рипли
time | String | Должно соответствовать формату | Время назначения команды | Строка со временем в формате ISO8601
Необходимые детали реализации:
• Команды должны валидироваться в рамках указанных ограничений, в случае их
некорректности должна быть возвращена соответствующая ошибка;
• Команды с приоритетом CRITICAL исполняются моментально, команды с
приоритетом COMMON добавляются в очередь, которая обрабатывается
отдельно;
• Очередь исполнения команд должна обрабатываться отдельным процессом;
• Учитывайте, что очередь команд не может быть бесконечной, ее переполнение
должно возвращать соответствующую ошибку;
• Для первой версии в качестве исполнения команды достаточно просто выводить
информацию о ней в лог.
Возможность аудита любых действий андроида
Каждое действие синтетика должно быть запротоколировано
Необходимо реализовать аннотацию @WeylandWatchingYou, которая будет обеспечивать
аудит выполняемых в софте андроида методов. В аудит должна отправляться информация
о имени метода, передаваемых параметрах и результате его выполнения.
Аудит должен быть возможен в двух режимах (должно настраиваться):
• Отправка данных в указанный Kafka Topic;
• Вывод информации в консоль.
Методы, которые будут маркироваться данной аннотацией – ответственность разработчика
софта на базе вашего стартера.
Возможность мониторинга текущей занятости андроида
Компании необходимо отслеживать эффективность работы каждого!
В рамках стартера необходимо реализовать возможность публикации следующих метрик:
• Текущая занятость андроида (количество задач в очереди);
• Количество выполненных заданий для каждого автора.
Модуль обработки ошибок
Все ломается, компания должна знать детали!
В первых версиях взаимодействие с андроидами предполагается с помощью REST API. В
случае возникновения ошибок они должны возвращаться в едином формате и с
корректными HTTP кодами.
Дополнительные опции
При желании вы можете расширить стартер любым функционалом, который вы
посчитаете нужным. Но помните, все должно быть под контролем, инциденты нам более
не нужны!
Самопроверка
Для проверки и будущей презентации полученного стартера руководству необходимо
разработать простейший сервис-эмулятор синтетика bishop-prototype который должен
принимать команды с помощью REST API и полностью демонстрировать разработанный
стартер.
Технические рекомендации
Ниже перечислен стек технологий, который рекомендуется использовать для решения
задачи:
• Spring Boot 3 – ключевой фреймворк для разработки;
• ThreadPoolExecutor – для реализации очереди задач;
• Kafka, AOP – для реализации задачи по аудиту;
• Actuator, Micrometer – для публикации метрик;
• @ExceptionHandler – для обработки ошибок.
С Уважением,
дирекция по роботизации компании Weyland-Yutani
Мы строим лучшие миры!
Послесловие автора
У данной задачи нет единственно верной реализации, многие принятые в ней решения
могут стать поводом для дискуссии.
Цель задачи – познакомиться с новыми инструментами и попробовать применить их.
Отнеситесь к данной работе творчески